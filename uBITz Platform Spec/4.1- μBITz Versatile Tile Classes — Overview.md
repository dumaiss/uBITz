# μBITz Versatile Tile Classes — Overview Specification (Draft v1.0)

**Status:** Draft
**Date:** 2025
**Applies to:** All μBITz Tiles (Media & IO)
**Depends on:** μBITz Host, μBITz Dock and μBITz Bank Specifications
**Non-normative**

---

## 0. Introduction

The μBITz Platform defines a modular computing environment consisting of four board types:

- **μBITz Host** — CPU Card
- **μBITz Bank** — Memory Card
- **μBITz Dock**— The backplane to connect it all
- **μBITz Tiles** — Peripheral devices that attach to the Dock bus

This document describes two *Versatile Tile Classes* — general-purpose, developer-extensible peripheral Tiles that serve as the foundation for higher-level device personalities (e.g., VDP Tile, Sound Tile, OPL3 Tile, Controller Tile, etc.):

- **Versatile Media Tiles** – FPGA & DDR3 based, high-performance Tiles
- **Versatile IO Tiles** – MCU + small FPGA based, low-cost utility Tiles

All device personalities are implemented on top of one of these two Versatile Tile classes, unless a developer chooses to design their own custom hardware.

Any custom Tile is valid as long as the μBITz Host and μBITz Dock contracts are fully respected.

---

# 1. Tile Classes

The μBITz Platform defines two broad classes of hardware devices.

```
Class A — Media Tile (Artix-7 + DDR3)
Class B — Versatile IO Tile (ESP32-S3 + iCE40)
```

Both classes:

- Appear as standard μBITz Devices
- Use the same enumeration model
- Expose registers/mailboxes
- May stretch `/READY` per the Dock rules
- May generate interrupts

They differ only in **capability**, **intended applications**, and **resource footprint**.

---

# 2. Design Philosophy

### 2.1 Platform Goals

- Allow **mix-and-match retro/hobbyist computing**
- Provide a **stable I/O and enumeration contract**
- Support both **simple IO gadgets** and **heavy media accelerators**
- Make bitstream-swapping and experimentation easy
- Let developers build **their own personalities** (devices) on common hardware

### 2.2 Developer Empowerment

Tiles are intentionally generic:

- Media Tiles contain *no mandatory VDP or sound logic*
- IO Tiles contain *no mandatory joystick or DB-9 logic*

A Tile’s personality is defined by:

1. The **bitstream** (for FPGA-class tiles)
2. The **firmware** (for MCU-class tiles)
3. The **Device Descriptor EEPROM** (identity + capabilities)

Developers are free to invent new devices on top of these foundations.

---

# 3. Class A — Media Tile (Artix-7 + DDR3)

## 3.1 Purpose

Media Tiles provide **high-bandwidth, programmable hardware** capable of:

- Full video pipelines (VGA/HDMI/LVDS)
- Audio DSP engines (PCM, FM, sample-based, S/PDIF)
- Classic chip recreations (TMS9918, V9958, SNES PPU, OPL3, SID)
- General-purpose accelerators (blitters, filters, rasterizers)
- Video capture / format conversion

They are the “heavyweight” tiles intended for advanced retro-computing and audiovisual work.

---

## 3.2 Hardware Architecture (High-Level)

**Baseline production target:**

| Component | Specification |
| --- | --- |
| FPGA | Xilinx Artix-7 XC7A50T (256-pin) |
| DRAM | 256–512 MB DDR3, x16 |
| Configuration | SPI flash (4–16 MB) |
| Dock Interface | μBITz Parallel or Serial Profile |
| EEPROM | I²C descriptor (mandatory) |
| I/O Headers | 1× high-speed media header (diff pairs) 1× general I/O header (GPIO) |
| Power | Onboard regulators for 3.3V, 1.5V (DDR), 1.0V (core) |

### 3.2.1 Internal Block Diagram

```
                 μBITz Dock
                     │
        ┌────────────┴───────────────┐
        │    Dock Interface Core     │
        │ (registers, mailbox, IRQs) │
        └────────────┬───────────────┘
                     │
        ┌────────────▼───────────────┐
        │      Artix-7 FPGA          │
        │                            │
        │   ┌──────────────────────┐ │
        │   │   User Media Core    │ │
        │   │  (bitstream-defined) │ │
        │   └─────────┬────────────┘ │
        │             │              │
        │       ┌─────▼─────┐        │
        │       │ DDR3 Ctrl │        │
        │       └─────┬─────┘        │
        └─────────────▼──────────────┘
                    DDR3 Memory
```

The Media Tile **does not** mandate any particular core.
VDP, Sound, Capture, GPU, or others are loaded through the bitstream.

---

## 3.3 Design Principles

- **Personality-agnostic board**
    - A single PCB supports VDP, Sound, OPL3, SID, GPU, capture, etc.
- **Stable external interfaces**
    - One high-speed connector, one general GPIO connector
- **Private memory**
    - DDR3 ensures deterministic, high-throughput pipelines
- **8-bit friendly**
    - Small register windows
    - `/READY` stretching
    - Interrupt channels
- **No constraints on bitstreams**
    - Developers free to build arbitrary FPGA designs

---

## 3.4 Typical Personalities

- μBITz VDP (reference)
- μBITz Sound Processor (reference)
- TI-VDP clone
- OPL3/AdLib tile
- SID-compatible tile
- VGA sprite engine
- Capture device
- Framebuffer blitter
- “Homebrew GPU” / rasterizer
- DSP/compute accelerators

---

# 4. Class B — Versatile IO Tile (ESP32-S3 + iCE40)

## 4.1 Purpose

The Versatile IO Tile is a **low-cost, easy-to-assemble, general-purpose IO device**.
It enables projects involving:

- Controllers (joystick/mouse/gamepad/HIDs)
- Simple VGA (320×240/160×120)
- LEDs / 7-segment
- Sensors (I²C/SPI)
- UART/SPI/WiFi bridges
- Floppy/SD/cassette emulation
- General GPIO logic
- Light audio (PWM/I²S/PSG-lite)

This tile is designed for beginners as well as advanced users needing “utility” functions.

---

## 4.2 Hardware Architecture (High-Level)

| Component | Specification |
| --- | --- |
| MCU | ESP32-S3 (dual-core, WiFi/USB) |
| FPGA | iCE40UP5K / HX4K |
| Dock Interface | μBITz Serial/Parallel |
| IO Headers | Qwiic ports (2–4), raw GPIO banks, PMOD-ish headers |
| Storage | Onboard SPI flash |
| Expanders | Optional I²C GPIO expanders |
| Power | 3.3V regulators |

### 4.2.1 Internal Block Diagram

```
                 μBITz Dock
                     │
        ┌────────────┴────────────┐
        │   Dock Interface (MCU)  │
        │  - registers            │
        │  - IRQs                 │
        │  - mailbox              │
        └────────────┬────────────┘
                     │
         ┌───────────▼───────────┐
         │       ESP32-S3        │
         │   (firmware brain)    │
         └───────────┬───────────┘
                     │ SPI/QSPI
         ┌───────────▼────────────┐
         │        iCE40           │
         │ (timing-critical logic)│
         └───────────┬────────────┘
                     │
         ┌───────────▼─────────────────────┐
         │  IO Banks / Qwiic / VGA-lite    │
         │  Sensors / LEDs / Serial / Etc. │
         └─────────────────────────────────┘
```

---

## 4.3 Design Principles

- **Expose pins, not opinions**
    - No fixed joystick/DB-9 layout
    - Just flexible headers: Qwiic, GPIO, PMOD-style
- **Low barrier to entry**
    - Through-hole / QFN/QFP parts
    - Easy to hand-solder
    - Target BOM <$70
- **Shared responsibilities**
    - ESP32: high-level protocols
    - iCE40: determinism, tight timing (VGA-lite, LED scanning, PSG-lite)
- **Flexible personalities**
    - Controller tile
    - Sensor tile
    - UART/WiFi bridge
    - Mini-sound tile
    - Mini-VDP tile
    - Any glue logic tile

---

## 4.4 Typical Personalities

- Gamepad/mouse/joystick interface
- Qwiic sensor hub
- LED matrix / HUD / 7-segment display
- UART/Bluetooth/WiFi serial gateway
- Simple PWM/I²S/AY-style sound tile
- Retro mini-VDP (160–320p VGA)
- Floppy/SD/cassette emulator
- General GPIO expander

---

# 5. System Integration

Both Tile classes integrate through the **μBITz Dock**.
A typical build might include:

```
                μBITz Dock
     ┌─────────┬─────────┬────────────┬──────────────┐
     │         │         │            │              │
  ┌─────┐ ┌────────┐  ┌────────┐  ┌────────┐     ┌──────────┐
  │ CPU │ │ Memory │  │  VDP   │  │ Sound  │     │ Versatile│
  │Host │ │ Bank   │  │(Media) │  │(Media) │     │ IO Tile  │
  └─────┘ └────────┘  └────────┘  └────────┘     └──────────┘
```

- Media Tiles handle **graphics and audio pipelines**
- Versatile IO Tiles handle **controls, sensors, displays, aux I/O**
- CPU board orchestrates everything using register writes and interrupts

At the software level, all Tiles behave uniformly:
registers, device descriptors, and interrupt lines per μBITz Core/Dock specifications.

---

# 6. Development Flow

1. **Port to μBITz Tile hardware**
    - Adjust pin maps
    - Connect to Dock interface core
2. **Flash bitstream or firmware**
3. **Program EEPROM descriptor**
4. **Install Tile into Dock**
5. **Develop host-side drivers** using μBITz I/O model

---

# 7. Summary

μBITz defines two classes of peripheral Versatile Tiles:

## Class A — Media Tiles

High-performance FPGA devices with DDR3, suitable for:

- VDPs
- Sound processors
- OPL/SID clones
- Capture cards
- Custom compute accelerators

## Class B — Versatile IO Tiles

Low-cost MCU+FPGA hybrid devices, suitable for:

- Controllers
- Sensors
- LEDs & heads-up displays
- UART/SPI/WiFi bridges
- VGA-lite
- PSG-lite
- General GPIO and experimentation

Both classes integrate uniformly under μBITz Dock, enabling a wide spectrum from simple I/O to advanced audiovisual pipelines — all composable, hackable, and retro-friendly.

---

# Part 2 — Hardware Design and Bill of Materials

## 2.1 Scope

This Part specifies the physical hardware design, component selection, and assembly considerations for the µBITz VDP Tile production board.

---

## 2.2 Design Targets

### Performance Targets

- Display: 800×600 @ 60Hz (40 MHz pixel clock)
- Memory bandwidth: >500 MB/s usable (DDR3-400)
- Sprite throughput: 48 objects per scanline
- FPGA utilization: <40% LUT, <90% BRAM (comfortable margins)

### Physical Targets

- Form factor: 100mm × 160mm (Eurocard)
- Connector: PCB edge (µBITz Dock compatible)
- Assembly: Hand-solderable (1mm pitch FPGA)
- Layers: 4-layer PCB minimum

### Cost Targets

- Single unit BOM: $73-78
- Volume (10 units): ~$65/unit
- Volume (100 units): ~$55/unit
- Target sell price: $100-120 (hobbyist-friendly)

---

## 2.3 Bill of Materials

### 2.3.1 Major Components

```
Component                        P/N                    Qty    Unit     Total
──────────────────────────────────────────────────────────────────────────────
FPGA:
  Xilinx Artix-7                 XC7A50T-1FGG256C       1      $40.00   $40.00
  Package: FGG256 (17×17mm, 1.0mm pitch)

Memory:
  DDR3 SDRAM 256MB               MT41K128M16JT-125:K    1      $8.00    $8.00
  Package: 96-ball FBGA (9×13mm, 0.8mm pitch)

Video Output:
  DVI Transmitter                TFP410PAP              1      $5.00    $5.00
  Package: HTQFP-64

Alternative: Direct TMDS from FPGA, omit TFP410 for -$5.00 savings)

Configuration:
  SPI Flash 8MB                  W25Q64JVSSIQ           1      $0.80    $0.80
  Package: SOIC-8

Enumeration:
  I²C EEPROM 256B                AT24C256C-SSHL-T       1      $0.50    $0.50
  Package: SOIC-8

Power Management:
  3.3V LDO Regulator             LM1117-3.3             1      $0.50    $0.50
  Package: SOT-223

  1.0V Buck Converter            TPS54331DR             1      $2.00    $2.00
  Package: SOIC-8

  Power Supervisor               TPS3809K33DBVR         1      $0.80    $0.80
  Package: SOT-23-3

Clock:
  50MHz Oscillator               SG-8002CE-50MHz        1      $1.00    $1.00
  Package: 7.0×5.0mm SMD

──────────────────────────────────────────────────────────────────────────────
Subtotal (Major Components):                                            $58.60
```

### 2.3.2 Passive Components

```
Component                        Specification          Qty    Unit     Total
──────────────────────────────────────────────────────────────────────────────
Capacitors:
  10µF Ceramic (X5R)             0805, 6.3V             12     $0.10    $1.20
  1µF Ceramic (X7R)              0805, 16V              8      $0.08    $0.64
  100nF Ceramic (X7R)            0805, 50V              30     $0.05    $1.50
  10nF Ceramic (C0G)             0603, 50V              4      $0.08    $0.32
  22pF Ceramic (C0G)             0603, 50V              4      $0.06    $0.24

Resistors:
  100Ω (1%)                      0805                   6      $0.03    $0.18
  10kΩ (1%)                      0805                   12     $0.03    $0.36
  3.3kΩ (1%)                     0805                   4      $0.03    $0.12
  470Ω (1%)                      0805                   4      $0.03    $0.12
  0Ω Jumpers                     0805                   4      $0.02    $0.08

Ferrite Beads:
  600Ω @ 100MHz                  0805                   3      $0.10    $0.30

──────────────────────────────────────────────────────────────────────────────
Subtotal (Passives):                                                    $5.06
```

### 2.3.3 Connectors and Mechanicals

```
Component                        Specification          Qty    Unit     Total
──────────────────────────────────────────────────────────────────────────────
Connectors:
  PCB Edge Connector             Hard gold plating      1      $2.00    $2.00
  (µBITz Dock interface)

  HDMI Type A Connector          Right-angle, SMT       1      $2.00    $2.00

  JTAG Header                    2×5, 2.54mm pitch      1      $0.50    $0.50

LEDs:
  Status LEDs (0805)             Red/Green/Yellow/Blue  4      $0.10    $0.40

Mounting:
  Standoff mounting holes        M3 compatible          4      -        -

──────────────────────────────────────────────────────────────────────────────
Subtotal (Connectors):                                                  $4.90
```

### 2.3.4 PCB

```
Component                        Specification          Qty    Unit     Total
──────────────────────────────────────────────────────────────────────────────
Printed Circuit Board:
  Size: 100mm × 150mm
  Layers: 4 (Signal/GND/Power/Signal)
  Thickness: 1.6mm
  Copper: 1oz (35µm)
  Finish: ENIG (gold)
  Color: Blue solder mask
  Silkscreen: White

  Manufacturer: JLC/PCBWay
  Quantity: 5 boards              5      $10.00   $10.00
  (Cost per board)                       ($2.00/ea for 5)

──────────────────────────────────────────────────────────────────────────────
Subtotal (PCB, per board):                                              $10.00
```

### 2.3.5 Assembly Materials

```
Component                        Specification          Qty    Unit     Total
──────────────────────────────────────────────────────────────────────────────
Solder Paste:
  Sn42/Bi57.6/Ag0.4              10g syringe            1      $8.00    $8.00
  (Low-temp, 138°C)              (Good for ~10 boards)

Flux:
  No-clean flux pen              10mL                   1      $5.00    $5.00

Isopropyl Alcohol:
  99% IPA                        500mL bottle           1      $8.00    $8.00

──────────────────────────────────────────────────────────────────────────────
Subtotal (Assembly, per board):                                        $21.00
──────────────────────────────────────────────────────────────────────────────

TOTAL BOM (Single Unit):                                               $80.66
TOTAL BOM (10 units, volume pricing):                                 $68.50
TOTAL BOM (100 units, volume pricing):                                $56.20
```

---

## 2.4 Component Selection Rationale

### 2.4.1 FPGA: Xilinx Artix-7 XC7A50T

**Why this FPGA:**
- ✓ Sufficient resources (32,600 LUTs, 75 BRAM blocks)
- ✓ Package solderable without advanced fabrication facilities or at home (FGG256, 1mm pitch)
- ✓ Affordable ($40 single, $28 qty 100)
- ✓ Proven DDR3 support (Xilinx MIG)
- ✓ Direct TMDS capability (optional, saves TFP410)
- ✓ Wide availability

**Alternatives considered:**
- XC7A35T: Too small (50 BRAM blocks, doesn’t fit)
- XC7A75T: Overkill (+$25, larger package)
- XC7A100T: Development only (too expensive for production)
- Lattice ECP5: Good alternative but different toolchain, BGA is finer (0.8mm, 0.5mm requiring advanced fabs)

**Package selection:**
- FGG256: 17×17mm, 1.0mm pitch
- 170 I/O pins (need ~110)
- Hand-solderable with hot air + patience
- Through-hole alternative: None available

---

### 2.4.2 Memory: MT41K128M16JT-125

**Why this DDR3:**
- ✓ Single chip solution (256MB)
- ✓ Well-supported by Xilinx MIG
- ✓ Affordable ($8 single, $5 qty 100)
- ✓ Package solderable without advanced fabrication facilities or at home (96-ball FBGA, 0.8mm pitch)
- ✓ DDR3-1600 capable (we run at DDR3-400)
- ✓ Proven on QMTech development board

**Configuration:**
- Memory interface: 16-bit
- Speed grade: -125 (800 MHz capable)
- Operating mode: DDR3-400 (400 MHz, 800 MT/s)
- Voltage: 1.5V (standard DDR3)

**Alternatives:**
- Smaller capacity (128MB): Saves $2-3 but less headroom
- Multiple SDRAM chips: More complex, similar cost
- SRAM: Would need 6+ chips, not cost-effective

---

### 2.4.3 Video Output: TFP410PAP vs Direct TMDS

**Option A: TFP410PAP DVI Transmitter**
- Dedicated chip, proven design
- Simpler FPGA logic
- Better signal integrity
- +$5 BOM cost

**Option B: Direct TMDS from FPGA**
- Use FPGA OBUFDS primitives
- Saves $5
- Slightly more complex HDL
- Requires careful PCB routing

**Recommendation:** Start with TFP410 (proven), offer direct TMDS as cost-optimized variant

---

### 2.4.4 Configuration: W25Q64 SPI Flash

**Purpose:** Store FPGA bitstream

**Specifications:**
- 8MB capacity (bitstream ~2-3MB)
- Quad SPI capable
- Fast boot (<500ms)
- Non-volatile configuration

**Alternatives:**
- Smaller capacity (4MB): Adequate but less margin
- Larger capacity (16MB): Unnecessary
- JTAG-only: Development mode, not production-suitable

---

### 2.4.5 Power Management

**3.3V Rail (LM1117-3.3):**
- Input: 5V from µBITz Dock
- Output: 3.3V @ 800mA
- Load: DDR3 (150mA) + TFP410 (120mA) + I/O (300mA) = 570mA
- Headroom: 230mA (adequate)
- Cost: $0.50
- Package: SOT-223 (hand-solderable)

**1.0V Rail (TPS54331):**
- Input: 5V or 3.3V
- Output: 1.0V @ 500mA (adjustable)
- Load: FPGA Vccint (300mA typ)
- Efficiency: 85% typical
- Cost: $2.00
- Package: SOIC-8

**Power Supervisor (TPS3809K33):**
- Monitors 3.3V rail
- Holds FPGA in reset until stable
- Power-on reset delay: 100ms
- Cost: $0.80

---

## 2.5 PCB Design Guidelines

### 2.5.1 Layer Stackup (4-Layer)

```
Layer 1 (Top):    Signal + Components
                  - FPGA, DDR3, connectors
                  - High-speed traces (DDR3, TMDS)

Layer 2:          Ground Plane
                  - Solid copper pour
                  - Via stitching every 5mm

Layer 3:          Power Plane
                  - Split: 3.3V / 1.0V / 1.5V regions
                  - Decoupling capacitors via to this layer

Layer 4 (Bottom): Signal + Return Path
                  - Slower signals (I²C, SPI, etc.)
                  - Power routing to Layer 3
```

---

### 2.5.2 Critical Trace Routing

**DDR3 Signals:**
- Controlled impedance: 50Ω single-ended, 100Ω differential
- Length matching: DQ/DQS within 25 mils (0.635mm)
- DQS pairs: Length match to ±5 mils
- Keep traces short: <2 inches total
- Route on Layer 1 with solid GND reference (Layer 2)
- No vias in DQ/DQS traces if possible
- Terminate DQS with 100Ω differential

**TMDS (DVI/HDMI):**
- Differential impedance: 100Ω
- Length matching: Within 5 mils per pair
- Keep pairs together, route parallel
- No sharp corners (use curved traces or 45° chamfers)
- AC coupling capacitors: 100nF near FPGA or encoder
- ESD protection at connector

**Clock Traces:**
- 50Ω impedance
- Keep short and direct
- Guard traces with GND on both sides
- Terminate if >2 inches

---

### 2.5.3 Power Distribution

**3.3V Distribution:**
- Wide traces: 20 mil minimum
- Copper pour on Layer 3
- Decoupling:
- 10µF bulk × 3 (near FPGA, DDR3, TFP410)
- 1µF × 8 (distributed)
- 100nF × 30 (one per FPGA I/O bank, DDR3 balls)

**1.0V (FPGA Core):**
- Separate pour on Layer 3
- Very close to FPGA
- Decoupling:
- 10µF bulk × 4
- 1µF × 4
- 100nF × 12

**1.5V (DDR3 Vdd):**
- Separate pour
- Close to DDR3
- Decoupling:
- 10µF × 2
- 100nF × 6

---

### 2.5.4 Thermal Management

**FPGA:**
- Copper pour under package (GND connection)
- Optional: Thermal pad on bottom side
- Optional: Heatsink (clip-on, 17×17mm)
- Typical power: 1-1.5W @ 37% utilization

**DDR3:**
- Minimal heat generation (<0.5W)
- Copper pour sufficient

**Power Regulators:**
- LM1117: May need heatsink if dropout >2V
- TPS54331: Integrated thermal pad, connect to GND pour

---

## 2.6 Assembly Considerations

### 2.6.1 Assembly Sequence

**Step 1: Solder Paste Application**
1. Clean PCB with IPA
2. Apply solder paste via stencil or syringe
3. Focus on FPGA, DDR3, fine-pitch components
4. Inspect under magnification

**Step 2: Component Placement**
1. Place FPGA (alignment critical!)
2. Place DDR3
3. Place all SMD components (tweezers)
4. Double-check orientation (IC pin 1, capacitor polarity)

**Step 3: Reflow**
1. Preheat to 120°C (60 seconds)
2. Ramp to 180°C (60 seconds)
3. Peak at 205-220°C (20-30 seconds)
4. Cool naturally (don’t move board)

**Step 4: Inspection**
1. Visual inspection under magnification
2. Check for bridges (especially FPGA, DDR3)
3. Check for tombstoned components
4. Verify all solder joints wetted properly

**Step 5: Through-Hole Components**
1. JTAG header
2. Any optional headers/connectors
3. Solder with soldering iron

**Step 6: Cleaning**
1. Clean with IPA and soft brush
2. Remove flux residue
3. Dry thoroughly

**Step 7: Testing**
1. Visual inspection one more time
2. Continuity test: GND, power rails
3. Power-on test: Measure voltages before FPGA config
4. Program FPGA via JTAG
5. Functional test

---

### 2.6.2 Common Assembly Issues

**FPGA Bridges:**
- Prevention: Good stencil, proper paste amount
- Fix: Solder wick + flux, or hot air rework
- Critical pins: Check all I/O banks

**DDR3 Alignment:**
- Prevention: Alignment marks on PCB and stencil
- The 0.8mm pitch is tight but doable
- Use magnification for placement

**Tombstoning (0805 passives):**
- Prevention: Equal pad sizes, even heating
- Small components heat unevenly, one end lifts
- Fix: Reflow again or hand-solder

**Cold Joints:**
- Visual: Dull, grainy appearance
- Fix: Touch up with soldering iron + flux

---

### 2.6.3 Required Tools

**Minimum:**
- Hot air rework station (350-400°C capable)
- Soldering iron (temperature controlled)
- Tweezers (ESD-safe, fine tip)
- Magnification (jeweler’s loupe or microscope)
- Multimeter
- IPA and flux

**Recommended:**
- Solder paste stencil (custom or universal)
- Reflow oven or hot plate
- Stereoscope (10-20× magnification)
- Hot air nozzles (various sizes)
- ESD mat and wrist strap
- PCB holder/vise

**Nice to have:**
- Infrared preheater
- Thermal camera
- Logic analyzer
- Oscilloscope

---

## 2.7 Testing and Validation

### 2.7.1 Power-On Test

**Before FPGA configuration:**

1. **Visual inspection**
    - No obvious shorts or bridges
    - All components properly seated
    - Correct polarity for polarized parts
2. **Resistance test (power off)**
    - GND to 3.3V: >10kΩ
    - GND to 1.0V: >5kΩ
    - GND to 1.5V: >10kΩ
3. **Power test (5V applied, no load)**
    - 3.3V rail: 3.25-3.35V
    - 1.0V rail: 0.95-1.05V
    - 1.5V rail: 1.47-1.53V (if using TPS54331 for DDR3 too)
4. **Current draw test**
    - Idle (unconfigured): <50mA @ 5V
    - If higher: Check for shorts

---

### 2.7.2 FPGA Configuration Test

1. **Connect JTAG**
    - Xilinx Platform Cable USB or compatible
    - Verify IDCODE: 0x362D093 (XC7A50T)
2. **Program test bitstream**
    - LED blink design
    - Verify all 4 LEDs toggle
3. **Clock test**
    - Verify 50MHz oscillator running
    - Check FPGA PLL lock

---

### 2.7.3 DDR3 Test

1. **MIG initialization**
    - Program DDR3 test bitstream
    - Check init_calib_complete signal
2. **Memory test patterns**
    - Walking 1s/0s
    - Checkerboard
    - Random data
3. **Bandwidth test**
    - Measure read/write throughput
    - Should exceed 500 MB/s usable

---

### 2.7.4 Video Output Test

1. **Test pattern generator**
    - Program color bar bitstream
    - Connect to HDMI monitor
    - Verify 800×600 @ 60Hz detected
2. **Pattern verification**
    - Check all colors render correctly
    - Verify sync signals stable
    - Check for snow/noise
3. **Full integration**
    - Program complete VDP bitstream
    - Test register access
    - Verify framebuffer display
    - Test sprite engine
    - Verify VBlank interrupt

---

### 2.7.5 µBITz Dock Integration Test

1. **Enumeration**
    - Install in Dock slot
    - Verify I²C EEPROM readable
    - Check device descriptor parsing
2. **Register access**
    - Write/read test from CPU
    - Verify /READY stretching
    - Check data integrity
3. **Interrupt test**
    - Verify INT_CH[0] assertion
    - Test Mode-2 vector read
    - Check ISR execution
4. **Full system test**
    - Run demo program
    - Verify sprite movement
    - Test palette updates
    - Verify FX core execution

---

## 2.8 Cost Analysis

### 2.8.1 Per-Unit Economics

```
Quantity          BOM      Assembly  Total    Sell Price  Margin
──────────────────────────────────────────────────────────────────
1 (prototype)     $80.66   $0        $80.66   $120        48%
10 (small batch)  $68.50   $0        $68.50   $105        53%
100 (production)  $56.20   $3*       $59.20   $90         52%

* Assembly at $3/board assumes partial automation or assembly service
```

---

### 2.8.2 Development Costs (One-Time)

```
Item                              Cost
─────────────────────────────────────────
PCB design (KiCad, free)          $0
Stencil (custom, optional)        $25
Test jigs/fixtures                $50
JTAG programmer                   $50-200
Development tools (owned)         $0
First prototype batch (5 boards)  $400
───────────────────────────────────────
Total development:                $525-675
```

Amortized over 50 units: ~$10-13/unit

---

### 2.8.3 Break-Even Analysis

**At $105 sell price (qty 10):**
- Revenue: $105
- COGS: $68.50
- Gross margin: $36.50 (34.8%)
- Development amortization: $12
- Net margin: $24.50 per unit

**Break-even: ~22 units** (covers development costs)

---

## 2.9 Compliance and Certifications

### 2.9.1 Hobbyist Exemptions

As a hobbyist/DIY product sold in small quantities:
- ✓ FCC Part 15 testing NOT required (<50 units/year)
- ✓ CE marking NOT required (DIY kit)
- ✓ RoHS compliance: Recommended but not mandatory
- ✓ UL/CSA certification: Not applicable

### 2.9.2 Recommended Practices

**EMI Mitigation:**
- Use shielded HDMI cable
- Ground planes on PCB
- Ferrite beads on power rails
- Decoupling capacitors

**ESD Protection:**
- ESD diodes on HDMI connector (optional)
- Proper grounding
- Assembly with ESD precautions

**Safety:**
- No exposed high voltages (all <5V)
- Overcurrent protection in Dock backplane
- Fuses not required for this design

---

## 2.10 Packaging and Documentation

### 2.10.1 Packaging (if selling)

**Minimum:**
- Anti-static bag (ESD-safe)
- Cardboard box or padded envelope
- Printed quick-start guide

**Recommended:**
- Custom box with foam insert
- Printed manual (register map, examples)
- USB drive with:
- Full documentation
- Bitstream files
- Example code
- KiCad design files (open-source)

---

### 2.10.2 Documentation Deliverables

**For builders:**
1. Complete schematic (PDF)
2. BOM with part numbers and suppliers
3. Assembly instructions with photos
4. Gerber files for PCB manufacture
5. Solder paste stencil files

**For users:**
1. Register reference manual
2. Programming guide with examples
3. FX Core development guide
4. Hardware datasheet
5. Troubleshooting guide

**For developers:**
1. HDL source code (Verilog)
2. Vivado project files
3. Constraints files (XDC)
4. Simulation testbenches
5. RISC-V firmware source

---

## 2.11 Supply Chain and Sourcing

### 2.11.1 Component Availability

**Critical components (long lead time):**
- XC7A50T FPGA: 12-20 weeks
- Recommend: Buy in advance, stock 10-20 units
- Alternatives: XC7A75T (pin-compatible, more expensive)

**Standard components (short lead time):**
- DDR3, passives, regulators: 1-4 weeks
- Usually in stock at Digi-Key, Mouser

**PCB Manufacturing:**
- JLC: 7-10 days + shipping
- PCBWay: 5-7 days + shipping
- OSHPark: 12-15 days (USA, more expensive)

---

### 2.11.2 Recommended Suppliers

**Components:**
- Digi-Key (primary, USA)
- Mouser (primary, USA)
- LCSC (cost-effective, China)
- Arrow (good for Xilinx FPGAs)

**PCBs:**
- JLC PCB (China, cheap, good quality)
- PCBWay (China, fast, slightly more expensive)
- OSHPark (USA, hobbyist-friendly, premium)

**Stencils:**
- OSH Stencils (USA, $25)
- JLC/PCBWay (bundled with PCB order)
